<!doctype html> 
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>SCM Risk Game</title>
</head>

<body onload="myFunction(); toggleSupplier()">
	<script src="//code.jquery.com/jquery-1.11.3.js" type="text/javascript"></script>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid"> 
            <a class="navbar-brand">
                <img src="/static/images/sick_skateboards_blue.svg" class="img-fluid ps-5" width="290px">
            </a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 1</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 2</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 3</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 4</button>
                    <button type="button" class="btn btn-secondary mx-1" disabled>PERIOD 5</button>
                </ul>
                <script>
				function OpenInstructions(){
							$("#Instructions").modal("show")
						}
				</script>
				
				<ul class="navbar-nav ps-5"> 
                    <button type="button" class="btn btn-outline-warning mx-1" onclick="OpenInstructions()">Instructions</a>
                </ul>
            </div>
        </div>
    </nav>
	
	<div class="modal fade" id="Instructions" tabindex="-1" >
                            <div class="modal-dialog modal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel"><b>Instructions</b></h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
									</div>
									
									<div class = "modal-body ps-5"> 
										<p> Keep the following in mind:</p>
										<p> <li>Inventory is being transferred from one period to another.</li>
											<li>If not indicated differently, there is no other connection between the periods or influence on one another.</li> 
											<li>No backorders or backorder penalty cost, only lost sales (demand that could not be fulfilled will not be transferred into future periods) occur when your received order quantity plus your inventory are lower than the demand. </li>
										</p>
										<p>
											<li>1 local supplier (US Productions) with high production cost </li> 
											<li>1 foreign supplier (TW Productions) with lower production cost </li>
										</p>
										<p>
											<li>Your orders will arrive at the end of the order period.</li>
											<li>The demand of each period will be covered from your inventory as far as possible.</li>
											<div div class="container pt-3 ps-5">
												<img src="/static/images/periods.jpeg" width="600px">
											</div>
										</p>
										<hr class="my-3">
										<h4 class="my-3 h3 text-primary">Main task: Placing orders to fulfil demand (100% demand forecast accuracy) and to maximize your profit</h4>
									</div>
							
									<div class="container col-6 ">
											<table class="table table-striped ">
												<thead>
													<tr>
													  <th scope="col">Key data</th>
													  <th scope="col">Price</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td>Selling price</td>
														<td><nobr>$ 200</nobr></td>
													</tr>
													
													<tr>
														<td>Purchasing price at US Productions</td>
														<td>$ 100</td>
													</tr>
													
													<tr>                            
														<td>Purchasing price at TW Productions</td>
														<td>$ 85</td>
													</tr>

													<tr>                            
														<td>Inventory holding cost per period</td>
														<td>$ 5</td>
													</tr>
												</tbody>
											</table>
										</div>
									
									
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									</div>
								</div>
                            </div>
    </div>

    <div class="container">
	<hr class="my-4 mt-5">
        <div class="row">
            <div class="col-7">
                <div class="container pb-4">
					<h2> <b> PERIOD 5 </b> </h2>
			
					<p class="pt-5 fs-4"> Demand for Period 5: <b> 380</b> </p>
					
					<p class="pb-4"> Be aware that the hurricane might happen this period. </p>
					
					   <hr> 						
                                            
                    <form method="post">
                        <input type="hidden" id ="analysis_purchase" name="analysis_purchase"></input>
						<p> <b> How much would you like to order from each supplier? </b> </p>
                        <div class="row mb-3">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity US Productions</label>
                            <div class = "col-7">
                                <input name ="order_US" type="number" min="0" oninput="validity.valid||(value='');" class="form-control" id="formGroupExampleInput1" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity TW Productions</label>
                            <div class = "col-7">
                                <input name ="order_TW" type="number" min="0" oninput="validity.valid||(value='');" class="form-control" id="formGroupExampleInput2" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        
                        <div id="step-1" class="row mb-3" style="display:none;">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity CN Productions</label>
                            <div class = "col-7">
                                <input name ="order_CN" type="number" min="0" oninput="validity.valid||(value='');" class="form-control" id="formGroupExampleInput3" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex pt-3 pb-5 justify-content-md-end">
                            <button onclick="calculate()" type="button" name="Button" value="Modal" class="btn btn-secondary mx-1" data-bs-toggle="modal" data-bs-target="#exampleModal">Calculate cost</button>
                           <button type="submit" class="btn btn-primary">Submit orders</button>   
                       </div>
                    </form>

                    <script>
                        function calculate()
                            {
                                var formatter = new Intl.NumberFormat('en-US', {
                                    style: 'currency',
                                    currency: 'USD',});
                                
                                var inventory = parseFloat("{{ inventory_r4 }}"); 

                                var field1=parseFloat(document.getElementById("formGroupExampleInput1").value)|| 0;
                                var field2=parseFloat(document.getElementById("formGroupExampleInput2").value)|| 0;
                                var field3=parseFloat(document.getElementById("formGroupExampleInput3").value)|| 0;
                                
                                var revenue=Math.min((inventory+field1+field2+field3),380)*200
                                var purchase=(field1*100)+(field2*85)+(field3*90)
                                var holding=Math.max((inventory+field1+field2+field3-380),0)*5
                                var profit=revenue-purchase-holding

                                document.getElementById("revenue").innerHTML=formatter.format(revenue);
                                document.getElementById("purchase").innerHTML=formatter.format(purchase);
                                document.getElementById("holding").innerHTML=formatter.format(holding);
                                document.getElementById("profit").innerHTML=formatter.format(profit);
                            }
                    </script>
                    
                     <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cost Calculation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="alert alert-success" role="alert">
                                        <p> 
                                        <div class="row">
                                        <div><b>Figures under the assumption that risk does not occur! </b> </div>
                                        <div id="title" ></div>
                                        </div>
                                        </p>
                                                                                
                                        <div class="row">
                                        <div class="col-sm-5 col-md-6">Revenue: </div>
                                        <div id="revenue" class="col-sm-5 offset-sm-2 col-md-6 offset-md-0"></div>
                                        </div>
                                        
                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Purchase Cost:</div>
                                        <div id="purchase" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Holding Cost:</div>
                                        <div id="holding" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>
                                        
                                        <div class="row">
                                            <p></p>
                                        </div>
                                        
                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Profit:</div>
                                        <div id="profit" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>                                        
                                </div> 
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                        </div>
                    </div> 
					
					
					
                </div> 
            </div>
			
            <div class="col-1">
			</div>
			
            <div class="col-4">
                <div class="container pt-5">
                    <table class="table table-striped mt-5">
                        
                        <tbody>
                            <tr>
								<td>Selling price</td>
								<td><nobr>$ 200</nobr></td>
                            </tr>
							
                            <tr>
								<td>Purchasing price at US Productions</td>
								<td>$ 100</td>
                            </tr>
							
                            <tr>                            
								<td>Purchasing price at TW Productions</td>
								<td>$ 85</td>
                            </tr>
							
							<tr>                            
								<td>Purchasing price at CN Productions</td>
								<td>$ 90</td>
                            </tr>
							
							<tr>                            
								<td>Inventory holding cost per period</td>
								<td>$ 5</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
				
				<div class="container pt-5">
                    <b> 
                        <script>
                            function myFunction() 
                                {
                                    var formatter = new Intl.NumberFormat('en-US', {
                                        style: 'currency',
                                        currency: 'USD',});

                                    var profit_r4 = "{{ profit_r4 }}";
                                    var inventory_r4 = "{{ inventory_r4 }}";
                                    
                                    document.getElementById("profit_r4").innerHTML=formatter.format(profit_r4);
                                    document.getElementById("inventory_r4").innerHTML=inventory_r4;
                                }

                            function toggleSupplier(){
                                var showSupplier = "{{ showCHN }}";
                                if (showSupplier == "True"){
                                    $("#step-1").show();
                                }
                                else {
                                    $("#step-1").hide();
                                    $("#formGroupExampleInput3").val("0");
                                }
                            }
                        </script>

                        <table class="table table-borderless">
                            <tbody>
                                <tr>
                                    <td>Current profit:</td>
                                    <td><span id="profit_r4"></span></td>
                                </tr>
                                <tr>
                                    <td>Current inventory level:</td>
                                    <td><span id="inventory_r4"></span></td>
                                </tr>
                            </tbody>
                    </table> </b>
                </div>
            </div>
        </div>
        
    </div>   
    
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>


