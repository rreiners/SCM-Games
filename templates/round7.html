<!doctype html> 
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>SCM Risk Game</title>
</head>

<body onload="myFunction(); toggleSupplier()">
	<script src="//code.jquery.com/jquery-1.11.3.js" type="text/javascript"></script>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid"> 
            <a class="navbar-brand">
                <img src="/static/images/logistics.svg" width="30" height="30" alt="">
            </a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 1</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 2</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 3</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 4</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 5</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 6</button>
                    <button type="button" class="btn btn-secondary mx-1" disabled>PERIOD 7</button>
                </ul>
                <script>
				function OpenInstructions(){
							$("#Instructions").modal("show")
						}
				</script>
				
				<ul class="navbar-nav"> 
                    <button type="button" class="btn btn-outline-warning mx-1" onclick="OpenInstructions()">Instructions</a>
                </ul>
            </div>
        </div>
    </nav>
	
	<div class="modal fade" id="Instructions" tabindex="-1" >
                            <div class="modal-dialog modal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel"><b>Instructions</b></h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
									</div>
									
									<div class = "modal-body ps-5"> 
										<p> Keep the following in mind:</p>
										<p> <li>Inventory is being transferred from one period to another.</li>
											<li>If not indicated differently, there is no other connection between the periods or influence on one another.</li> 
											<li>No backorders or backorder penalty cost, only lost sales occur when the shipped quantity is lower than demand. </li>
										</p>
										<p>
											<li>1 local supplier (US Productions) with high production cost </li> 
											<li>1 Far East supplier (TW Productions) with lower production cost </li>
										</p>
										<p>
											<li>Your order will arrive at the end of the order period. You only have to pay for the products you receive in proper quality independent of what you have ordered. </li>
											<li>The demand of each period will be covered from your inventory as far as possible.</li>
										</p>
										<hr class="my-3">
										<h4 class="my-3 h3 text-primary">Main task: Placing orders to fulfil demand (100% demand forecast accuracy) and maximize your profit</h4>
									</div>
							
									<div class="container col-6 ">
											<table class="table table-striped ">
												<thead>
													<tr>
													  <th scope="col">Key data</th>
													  <th scope="col">Price</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td>Selling price</td>
														<td><nobr>$ 200</nobr></td>
													</tr>
													
													<tr>
														<td>Purchasing price at US Productions</td>
														<td>$ 100</td>
													</tr>
													
													<tr>                            
														<td>Purchasing price at TW Productions</td>
														<td>$ 85</td>
													</tr>

													<tr>                            
														<td>Inventory holding cost per period</td>
														<td>$ 5</td>
													</tr>
												</tbody>
											</table>
										</div>
									
									
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									</div>
								</div>
                            </div>
    </div>

    <div class="container">
	<hr class="my-4 mt-5">
        <div class="row">
            <div class="col-7">
                <div class="container pb-4">
					<h2> <b> PERIOD 7 </b> </h2>
					
					<p class="text-primary pt-4"style ="text-align: justify;"> The purchasing price at US Productions will remain at the higher level. </p>
					
					<p class="pt-2 fs-4"> Demand for Period 7: <b> 400</b> </p>
					
					<div style ="text-align: justify;" class= "pb-3">
						<script> $(function () {
                            $('.btn-check').click(function(e) {
                              $('.btn-check').not(this).prop('checked', false);
                            });
                          });
                        </script>
						<p>  You are watching the news on TV when you suddenly hear a familiar name. The news reporter is talking about <b>wildfires</b> which are quickly moving towards Portland. You are shocked because last time you heard about them, it was just a small outbreak in Southern California. You immediately get on the phone with your building protection manager.</p>
						
						<p class="pb-3">  If your warehouse burns down, you will <b>lose all your inventory</b> and you will <b>not be able to receive any shipments in this period</b>. You will, however, be able to fully use your warehouse again from Period 8 onwards.</p>
						
						   <hr> 
						<div class="pb-3">
							<p class="pt-2"> You can purchase the risk analysis to help you estimate the probability of the risk.</p>
							<button id="analysisButton" type="button" class="btn btn-outline-secondary d-grid gap-2 col-6 mx-auto" onclick="openConfirmationModal()">
								Buy analysis for $8,000
							</button>

							<div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
								<div class="modal-content">
								  <div class="modal-header">
									<h5 class="modal-title" id="confirmModalLabel"> Confirmation</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								  </div>
								  <div class="modal-body">
									Are you sure you want to buy the analysis for $8,000?
								  </div>
								  <div class="modal-footer">
                                    <script>
                                        function updateProfit(){
											setBought();
                                            var formatter = new Intl.NumberFormat('en-US', {
                                                style: 'currency',
                                                currency: 'USD',});
                                            var profit_r6=parseFloat("{{ profit_r6 }}") - 8000;
                                            document.getElementById("profit_r6").innerHTML=formatter.format(profit_r6);
                                            document.getElementById("analysis_purchase").value=8000;
										}					

										function setBought() {
											$("#analysisButton").html("Show analysis")
											$("#analysisButton").attr("onclick", "showAnalysis()")
										}
										
										function showAnalysis() {
											$("#analysisModal").modal("show")
										}
										
										function openConfirmationModal(){											
											$("#confirmModal").modal("show")
										}
									</script>
                                    
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button onclick="updateProfit()" type="button" name="Button" value="Modal" class="btn btn-primary mx-1" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#analysisModal">Show Analysis</button>
                                  </div>
								</div>
							  </div>
							</div>
                        </div>
                        
                        <div class="modal fade" id="analysisModal" tabindex="-1" aria-labelledby="analysisModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">Risk Analysis</h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
									</div>
									<div class="modal-body">
										<div class="card mb-3">
										  <div class="row g-0">
											<div class="col-5 pt-2">
											  <img src="/static/images/analysis_7.jpg">
											</div>
											<div class="col-7">
											  <div class="card-body">
													<p class="card-text"> "The fires are out of control. I am 85-95% sure that they will come very close to your warehouse." </p>
													<p class = "card-text fst-italic"> - Nate, fireman </p>
												</div>
											</div>
										  </div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									</div>
								</div>
                            </div>
                        </div>
						
                        
						<hr>
						
						<form method="post">
						<input type="hidden" id ="analysis_purchase" name="analysis_purchase"></input> 
						
						<p class="text-primary pt-4"style ="text-align: justify;"> Please note that you will not have enough time to install more than one option for protection. Thus, in this round you can only choose one out of the three options given below. </p>

						<p class="pt-3">Your building protection manager tells you not to worry. They can install firebreaks for $ 40,000 Â which will make sure that the fire cannot hit your company. </p>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <input type="checkbox" class="btn-check" name="option1" id="option1" value="40000" autocomplete="off">
                                <label class="btn btn-outline-primary" for="option1">Build firebreaks for $ 40,000</label>    
							</div>
						
						<p class="pt-3">You could also rent a storage location downtown for this period which would cost you $ 20,000. However, you can only store 350 units there. Your building protection manager tells you, that in the past, firefighter have never allowed the wildfires to spread into downtown.</p>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <input type="checkbox" class="btn-check" name="option2" id="option2" value="20000" autocomplete="off">
                                <label class="btn btn-outline-primary" for="option2">Buy new storage location for $ 20,000</label>
                            </div>
						
						<p class="pt-3">You call your suppliers and ask them if they can deliver the products directly to the customer. They all agree but not without being paid for it. They will charge you additional $ 60 per piece for storage and delivery if you decide to ship the products from the suppliers directly to your customers without ever putting them into your own storage. However, you can only use this option this period and your suppliers will only serve customer demand. All orders that exceed customer demand have to be paid for (regular price) but cannot be delivered to your warehouse.</p>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <input type="checkbox" class="btn-check" name="option3" id="option3" value="True" autocomplete="off">
                                <label class="btn btn-outline-primary" for="option3">Ship products directly from supplier to customers for additional $ 60 per piece</label>
                            </div>
						</div>
						<hr>

						<p> <b> How much would you like to order from each supplier? </b> </p>
                        <div class="row mb-3">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity US Productions</label>
                            <div class = "col-7">
                                <input name ="order_US" type="number" class="form-control" id="formGroupExampleInput1" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity TW Productions</label>
                            <div class = "col-7">
                                <input name ="order_TW" type="number" class="form-control" id="formGroupExampleInput2" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        
                        <div id="step-1" class="row mb-3" style="display:none;">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity CN Productions</label>
                            <div class = "col-7">
                                <input name ="order_CN" type="number" class="form-control" id="formGroupExampleInput3" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex pt-3 pb-5 justify-content-md-end">
                        	<button onclick="calculate()" type="button" name="Button" value="Modal" class="btn btn-secondary mx-1" data-bs-toggle="modal" data-bs-target="#exampleModal">Calculate cost</button>
                           	<button type="submit" class="btn btn-primary">Submit orders</button>   
                       </div>
					</form>
					
					<script>
                        function calculate()
                            {
                                var formatter = new Intl.NumberFormat('en-US', {
                                    style: 'currency',
                                    currency: 'USD',});

                                var inventory = parseFloat("{{ inventory_r6 }}"); 
                                var analsis = parseFloat(document.getElementById("analysis_purchase").value)|| 0;
                                    
                                var field1=parseFloat(document.getElementById("formGroupExampleInput1").value)|| 0;
                                var field2=parseFloat(document.getElementById("formGroupExampleInput2").value)|| 0;
                                var field3=parseFloat(document.getElementById("formGroupExampleInput3").value)|| 0;
                                
                                var reaction = null; 
                                var inputElements = document.getElementsByClassName('btn-check');
                                for(var i=0; inputElements[i]; ++i){
                                    if(inputElements[i].checked){
                                        reaction = inputElements[i].value;
                                        break;
                                    }
                                }
                                
                                var revenue=Math.min((inventory+field1+field2+field3),400)*200			
                                var purchase=(field1*110)+(field2*85)+(field3*90)
                                var holding=Math.max((inventory+field1+field2+field3-400),0)*5
                                var profit=revenue-purchase-holding-reaction

                                document.getElementById("revenue").innerHTML=formatter.format(revenue);
                                document.getElementById("purchase").innerHTML=formatter.format(purchase);
                                document.getElementById("holding").innerHTML=formatter.format(holding);
                                document.getElementById("profit").innerHTML=formatter.format(profit);
                                document.getElementById("reaction").innerHTML=formatter.format(reaction);
                                document.getElementById("analsis").innerHTML=formatter.format(analsis);
                            }
                    </script>
					
					 <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cost Calculation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="alert alert-success" role="alert">
                                        <p> 
                                        <div class="row">
                                        <div><b>Figures under the assumption that risk does not occur! </b> </div>
                                        <div id="title" ></div>
                                        </div>
                                        </p>
                                                                                
                                        <div class="row">
                                        <div class="col-sm-5 col-md-6">Revenue: </div>
                                        <div id="revenue" class="col-sm-5 offset-sm-2 col-md-6 offset-md-0"></div>
                                        </div>
                                        
                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Purchase Cost:</div>
                                        <div id="purchase" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Holding Cost:</div>
                                        <div id="holding" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Reaction Cost:</div>
                                        <div id="reaction" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>
                                        
                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Analysis Cost:</div>
                                        <div id="analsis" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Profit:</div>
                                        <div id="profit" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>                                        
                                </div> 
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                        </div>
                    </div> 
					
					
					
                </div> 
            </div>
			
            <div class="col-1">
			</div>
			
            <div class="col-4 pt-5">
                <div class="container pt-5">
                    <table class="table table-striped mt-5">
                        
                        <tbody>
                            <tr>
								<td>Selling price</td>
								<td><nobr>$ 200</nobr></td>
                            </tr>
							
                            <tr>
								<td>Purchasing price at US Productions</td>
								<td>$ 110</td>
                            </tr>
							
                            <tr>                            
								<td>Purchasing price at TW Productions</td>
								<td>$ 85</td>
                            </tr>
							
							<tr>                            
								<td>Purchasing price at CN Productions</td>
								<td>$ 90</td>
                            </tr>
							
							<tr>                            
								<td>Inventory holding cost per period</td>
								<td>$ 5</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
				
				<div class="container pt-5">
                    <b> 
                        <script>
                            function myFunction() 
                                {
                                    var formatter = new Intl.NumberFormat('en-US', {
                                        style: 'currency',
                                        currency: 'USD',});

                                    var profit_r6 = "{{ profit_r6 }}";
                                    var inventory_r6 = "{{ inventory_r6 }}";
                                    
                                    document.getElementById("profit_r6").innerHTML=formatter.format(profit_r6);
                                    document.getElementById("inventory_r6").innerHTML=inventory_r6;
                                }

                            function toggleSupplier(){
                                var showSupplier = "{{ showCHN }}";
                                if (showSupplier == "True"){
                                    $("#step-1").show();
                                }
                                else {
                                    $("#step-1").hide();
                                    $("#formGroupExampleInput3").val("0");
                                }
                            }
                        </script>

                        <table class="table table-borderless">
                            <tbody>
                                <tr>
                                    <td>Current profit:</td>
                                    <td><span id="profit_r6"></span></td>
                                </tr>
                                <tr>
                                    <td>Current inventory level:</td>
                                    <td><span id="inventory_r6"></span></td>
                                </tr>
                            </tbody>
                    </table> </b>
                </div>
            </div>
        </div>
        
    </div>   
    
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>


