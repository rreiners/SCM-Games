<!doctype html> 
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>SCM Risk Game</title>
</head>

<body onload="myFunction(); toggleSupplier()">
	<script src="//code.jquery.com/jquery-1.11.3.js" type="text/javascript"></script>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid"> 
            <a class="navbar-brand">
                <img src="/static/images/logistics.svg" width="30" height="30" alt="">
            </a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 1</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 2</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 3</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 4</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 5</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 6</button>
                    <button type="button" class="btn btn-outline-secondary mx-1" disabled>PERIOD 7</button>    
					<button type="button" class="btn btn-secondary mx-1" disabled>PERIOD 8</button> 
                </ul>
                <ul class="navbar-nav"> 
                    <button type="button" class="btn btn-outline-warning mx-1" href="/">Instructions</button> 
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
	<hr class="my-4 mt-5">
        <div class="row">
            <div class="col-7">
                <div class="container pb-4">
					<h2> <b> PERIOD 8 </b> </h2>
					
					<p class="text-primary pt-4"style ="text-align: justify;"> Your warehouse can be used again.</p>
					
					<p class="pt-2 fs-4"> Demand for Period 8: <b> 460</b> </p>
                    
                    <div style ="text-align: justify;" class="pb-3">
                        <script> $(function () {
                            $('.btn-check').click(function(e) {
                              $('.btn-check').not(this).prop('checked', false);
                            });
                          });
                        </script>
                        <p>  You are in a meeting with IT-Security and they tell you that lately there have been several <b>cyber-attacks on online sport shops</b>. They are afraid that you might be an interesting target, too and they emphasize that they did not get enough budget in the last years to be able to stay up to date concerning data security systems. </p>
						
						<p class="pb-3">  In case you are being hit, you will <b>not be able to deliver any products in period 9</b>, because the IT department will first have to restore all data for the processes to work again. </p>
						
                         <hr> 
						<div class="pb-3">
							<p class="pt-2"> You can purchase the risk analysis to help you estimate the probability of the risk.</p>
							<button id="analysisButton" type="button" class="btn btn-outline-secondary d-grid gap-2 col-6 mx-auto" onclick="openConfirmationModal()">
								Buy analysis for $8,000
							</button>

							<div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
								<div class="modal-content">
								  <div class="modal-header">
									<h5 class="modal-title" id="confirmModalLabel"> Confirmation</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								  </div>
								  <div class="modal-body">
									Are you sure you want to buy the analysis for $8,000?
								  </div>
								  <div class="modal-footer">
                                    <script>
                                        function updateProfit(){
											setBought();
                                            var formatter = new Intl.NumberFormat('en-US', {
                                                style: 'currency',
                                                currency: 'USD',});
                                            var profit_r7=parseFloat("{{ profit_r7 }}") - 8000;
                                            document.getElementById("profit_r7").innerHTML=formatter.format(profit_r7);
                                            document.getElementById("analysis_purchase").value=8000;
										}					

										function setBought() {
											$("#analysisButton").html("Show analysis")
											$("#analysisButton").attr("onclick", "showAnalysis()")
										}
										
										function showAnalysis() {
											$("#analysisModal").modal("show")
										}
										
										function openConfirmationModal(){											
											$("#confirmModal").modal("show")
										}
									</script>
                                    
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button onclick="updateProfit()" type="button" name="Button" value="Modal" class="btn btn-primary mx-1" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#analysisModal">Show Analysis</button>
                                  </div>
								</div>
							  </div>
							</div>
                        </div>
                        
                        <div class="modal fade" id="analysisModal" tabindex="-1" aria-labelledby="analysisModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">Risk Analysis</h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
									</div>
									<div class="modal-body">
										<div class="card mb-3">
										  <div class="row g-0">
											<div class="col-5 pt-3">
											  <img src="/static/images/analysis_8.jpg">
											</div>
											<div class="col-7">
											  <div class="card-body">
													<p class="card-text"> "I revised your IT security last month, and as far as I can say, you will be hit by these attacks at a 70% probability." </p>
													<p class = "card-text fst-italic"> - Joe, IT Security Analyst </p>
												</div>
											</div>
										  </div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
									</div>
								</div>
                            </div>
                        </div>
						
                        
						<hr>
						
						<form method="post">
						<input type="hidden" id ="analysis_purchase" name="analysis_purchase"></input> 

						<p class="pt-3">You can buy a new state-of-the-art data security system which will definitely prevent any hacking. However, they are extremely costly and you will have to pay $ 45,000. </p>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <input type="checkbox" class="btn-check" name="option1" id="option1" value="45000" autocomplete="off">
                                <label class="btn btn-outline-primary" for="option1">Buy new data security system for $ 45,000</label>    
							</div>
						
						<p class="pt-3">You could also update the existing data security system. This will not fully protect you but assures that your processes can be restored a lot quicker in case of an attack and you will still be able to cover 85% of the periods demand. This will cost you $ 39,000.</p>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <input type="checkbox" class="btn-check" name="option2" id="option2" value="39000" autocomplete="off">
                                <label class="btn btn-outline-primary" for="option2">Buy update for data security system for $ 39,000</label>
                            </div>
						
						<p class="pt-3">Finally, you have received an offer from a firm that is specialized on IT security. You can outsource IT security to them for $ 55,000 and they will then be liable for all losses you will suffer due to any cyber-attack.</p>
                            <div class="d-grid gap-2 col-6 mx-auto">
                                <input type="checkbox" class="btn-check" name="option3" id="option3" value="55000" autocomplete="off">
                                <label class="btn btn-outline-primary" for="option3">Outsource IT security for $ 55,000</label>
                            </div>
						</div>
						<hr>

						<p> <b> How much would you like to order from each supplier? </b> </p>
                        <div class="row mb-3">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity US Productions</label>
                            <div class = "col-7">
                                <input name ="order_US" type="number" class="form-control" id="formGroupExampleInput1" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity TW Productions</label>
                            <div class = "col-7">
                                <input name ="order_TW" type="number" class="form-control" id="formGroupExampleInput2" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        
                        <div id="step-1" class="row mb-3" style="display:none;">
                            <label for="formGroupExampleInput" class="col-5 col-form-label">Order quantity CN Productions</label>
                            <div class = "col-7">
                                <input name ="order_CN" type="number" class="form-control" id="formGroupExampleInput3" placeholder="insert order quantity" >
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex pt-3 pb-5 justify-content-md-end">
                        	<button onclick="calculate()" type="button" name="Button" value="Modal" class="btn btn-secondary mx-1" data-bs-toggle="modal" data-bs-target="#exampleModal">Calculate cost</button>
                           	<button type="submit" class="btn btn-primary">Submit orders</button>   
                       </div>
					</form>
					
					<script>
                        function calculate()
                            {
                                var formatter = new Intl.NumberFormat('en-US', {
                                    style: 'currency',
                                    currency: 'USD',});

                                var inventory = parseFloat("{{ inventory_r7 }}"); 
                                var analsis = parseFloat(document.getElementById("analysis_purchase").value)|| 0;
                                    
                                var field1=parseFloat(document.getElementById("formGroupExampleInput1").value)|| 0;
                                var field2=parseFloat(document.getElementById("formGroupExampleInput2").value)|| 0;
                                var field3=parseFloat(document.getElementById("formGroupExampleInput3").value)|| 0;

                                var reaction = null; 
                                var inputElements = document.getElementsByClassName('btn-check');
                                for(var i=0; inputElements[i]; ++i){
                                    if(inputElements[i].checked){
                                        reaction = inputElements[i].value;
                                        break;
                                    }
                                }
                                
                                var revenue=Math.min((inventory+field1+field2+field3),460)*200			// ergänzen um inventar aus Vorperiode 
                                var purchase=(field1*110)+(field2*85)+(field3*90)
                                var holding=Math.max((inventory+field1+field2+field3-460),0)*15
                                var profit=revenue-purchase-holding-reaction-analsis

                                document.getElementById("revenue").innerHTML=formatter.format(revenue);
                                document.getElementById("purchase").innerHTML=formatter.format(purchase);
                                document.getElementById("holding").innerHTML=formatter.format(holding);
                                document.getElementById("profit").innerHTML=formatter.format(profit);
                                document.getElementById("reaction").innerHTML=formatter.format(reaction);
                            }
                    </script>
					
					 <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cost Calculation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="alert alert-success" role="alert">
                                        <p> 
                                        <div class="row">
                                        <div><b>Figures under the assumption that risk does not occur! </b> </div>
                                        <div id="title" ></div>
                                        </div>
                                        </p>
                                                                                
                                        <div class="row">
                                        <div class="col-sm-5 col-md-6">Revenue: </div>
                                        <div id="revenue" class="col-sm-5 offset-sm-2 col-md-6 offset-md-0"></div>
                                        </div>
                                        
                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Purchase Cost:</div>
                                        <div id="purchase" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Holding Cost:</div>
                                        <div id="holding" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Reaction Cost:</div>
                                        <div id="reaction" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Analsis Cost:</div>
                                        <div id="analsis" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>

                                        <div class="row">
                                        <div class="col-sm-6 col-md-5 col-lg-6">Profit:</div>
                                        <div id="profit" class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0"></div>
                                        </div>                                        
                                </div> 
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                        </div>
                    </div> 
					
					
					
                </div> 
            </div>
			
            <div class="col-1">
			</div>
			
            <div class="col-4 pt-5">
                <div class="container pt-5">
                    <table class="table table-striped mt-5">
                        
                        <tbody>
                            <tr>
								<td>Selling price</td>
								<td><nobr>$ 200</nobr></td>
                            </tr>
							
                            <tr>
								<td>Purchasing price at US Productions</td>
								<td>$ 110</td>
                            </tr>
							
                            <tr>                            
								<td>Purchasing price at TW Productions</td>
								<td>$ 85</td>
                            </tr>
							
							<tr>                            
								<td>Purchasing price at CN Productions</td>
								<td>$ 90</td>
                            </tr>
							
							<tr>                            
								<td>Inventory holding cost per period</td>
								<td>$ 15</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
				
				<div class="container pt-5">
                    <b> 
                        <script>
                            function myFunction() 
                                {
                                    var formatter = new Intl.NumberFormat('en-US', {
                                        style: 'currency',
                                        currency: 'USD',});

                                    var profit_r7 = "{{ profit_r7 }}";
                                    var inventory_r7 = "{{ inventory_r7 }}";
                                    
                                    document.getElementById("profit_r7").innerHTML=formatter.format(profit_r7);
                                    document.getElementById("inventory_r7").innerHTML=inventory_r7;
                                }

                            function toggleSupplier(){
                                var showSupplier = "{{ showCHN }}";
                                if (showSupplier == "True"){
                                    $("#step-1").show();
                                }
                                else {
                                    $("#step-1").hide();
                                    $("#formGroupExampleInput3").val("0");
                                }
                            }
                        </script>

                        <table class="table table-borderless">
                            <tbody>
                                <tr>
                                    <td>Current profit:</td>
                                    <td><span id="profit_r7"></span></td>
                                </tr>
                                <tr>
                                    <td>Current inventory level:</td>
                                    <td><span id="inventory_r7"></span></td>
                                </tr>
                            </tbody>
                    </table> </b>
                </div>
            </div>
        </div>
        
    </div>   
    
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>


